<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Rupee::Option</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            Rupee::Option 
            
                <span class="parent">&lt; 
                    
                    <a href="Security.html">Rupee::Security</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/ext/rupee/statistics_c.html">ext/rupee/statistics.c</a></li>
            
            <li><a href="../../files/ext/rupee/option_c.html">ext/rupee/option.c</a></li>
            
            <li><a href="../../files/lib/rupee/option_rb.html">lib/rupee/option.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>B</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-black76">black76</a>,
              </li>
            
              
              <li>
                <a href="#method-c-black_scholes">black_scholes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-black_scholes">black_scholes</a>,
              </li>
            
              
              <li>
                <a href="#method-c-bs">bs</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-charm">charm</a>,
              </li>
            
              
              <li>
                <a href="#method-c-color">color</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-delta">delta</a>,
              </li>
            
              
              <li>
                <a href="#method-c-dual_delta">dual_delta</a>,
              </li>
            
              
              <li>
                <a href="#method-c-dual_gamma">dual_gamma</a>,
              </li>
            
              
              <li>
                <a href="#method-c-dvega_dtime">dvega_dtime</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>G</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-gamma">gamma</a>,
              </li>
            
              
              <li>
                <a href="#method-c-gbs">gbs</a>,
              </li>
            
              
              <li>
                <a href="#method-c-generalized_black_scholes">generalized_black_scholes</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-implied_volatility">implied_volatility</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-rho">rho</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-speed">speed</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-theta">theta</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>V</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-vanna">vanna</a>,
              </li>
            
              
              <li>
                <a href="#method-c-vega">vega</a>,
              </li>
            
              
              <li>
                <a href="#method-c-vomma">vomma</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>Z</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-zomma">zomma</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    
      <!-- Section attributes -->
      <div class="sectiontitle">Attributes</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>div_yield</td>
            <td class='attr-desc'><p>The dividend yield</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>price</td>
            <td class='attr-desc'><p>The price of the option</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>rate</td>
            <td class='attr-desc'><p>The risk-free rate</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>strike</td>
            <td class='attr-desc'><p>The strike price of the underlying security</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>time</td>
            <td class='attr-desc'><p>The remaining time to maturity</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>type</td>
            <td class='attr-desc'><p>The type of the option. Accepts <tt>&quot;call&quot;</tt> and
<tt>&quot;put&quot;</tt>.</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>underlying</td>
            <td class='attr-desc'><p>The price of the underlying security</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>volatility</td>
            <td class='attr-desc'><p>The annualized price volatility</p></td>
          </tr>
        
      </table>
    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-black76">
            
              <a name="method-c-black76"></a><b>black76(call_put_flag, forward, strike_price, time_to_expiry,
risk_free_rate, volatility)
 </b>
            
          </div>
          
          
            <div class="description">
              <p>The Black-76 valuation for options on futures and forwards</p>

<h4>Arguments</h4>
<ul><li>
<p><tt>call_put_flag</tt> - Whether the instrument is a call (c) or a put (p)</p>
</li><li>
<p><tt>forward</tt> - The current forward value</p>
</li><li>
<p><tt>strike_price</tt> - The option's strike price</p>
</li><li>
<p><tt>time_to_expiry</tt> - The time to maturity in years</p>
</li><li>
<p><tt>risk_free_rate</tt> - The risk-free rate through expiry</p>
</li><li>
<p><tt>volatility</tt> - The implied volatility at expiry</p>
</li></ul>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-black76_source')" id="l_method-c-black76_source">show</a>
                
              </p>
              <div id="method-c-black76_source" class="dyn-source">
                <pre>static VALUE
rupee_black76(self, _call_put_flag, _S, _K, _T, _r, _v)
  VALUE self, _call_put_flag, _S, _K, _T, _r, _v;
{
  const char *call_put_flag;
  double S, K, T, r, v;

  call_put_flag = StringValuePtr(_call_put_flag);
  S = NUM2DBL(_S);
  K = NUM2DBL(_K);
  T = NUM2DBL(_T);
  r = NUM2DBL(_r);
  v = NUM2DBL(_v);

  return rb_float_new(black76(call_put_flag, S, K, T, r, v));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-black_scholes">
            
              <a name="method-c-black_scholes"></a><b>black_scholes(call_put_flag, underlying, strike, time, rate,
volatility)
 </b>
            
          </div>
          
          
            <div class="description">
              <p>The Black-Scholes European call/put valuation</p>

<h4>Arguments</h4>
<ul><li>
<p><tt>call_put_flag</tt> - Whether the instrument is a call (c) or a put (p)</p>
</li><li>
<p><tt>forward</tt> - The current forward value</p>
</li><li>
<p><tt>strike_price</tt> - The option's strike price</p>
</li><li>
<p><tt>time_to_expiry</tt> - The time to maturity in years</p>
</li><li>
<p><tt>risk_free_rate</tt> - The risk-free rate through expiry</p>
</li><li>
<p><tt>dividend_yield</tt> - The annual dividend yield</p>
</li><li>
<p><tt>volatility</tt> - The implied volatility at expiry</p>
</li></ul>
            </div>
          
          
          
            <div class="aka">
              Also aliased as: <a href="Option.html#method-c-bs">bs</a>
            </div>
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-black_scholes_source')" id="l_method-c-black_scholes_source">show</a>
                
              </p>
              <div id="method-c-black_scholes_source" class="dyn-source">
                <pre>static VALUE
rupee_black_scholes(self, _call_put_flag, _S, _K, _T, _r, _q, _v)
  VALUE self, _call_put_flag, _S, _K, _T, _r, _q, _v;
{
  const char *call_put_flag;
  double S, K, T, r, q, v;

  call_put_flag = StringValuePtr(_call_put_flag);
  S = NUM2DBL(_S);
  K = NUM2DBL(_K);
  T = NUM2DBL(_T);
  r = NUM2DBL(_r);
  q = NUM2DBL(_q);
  v = NUM2DBL(_v);

  return rb_float_new(bs(call_put_flag, S, K, T, r, q, v));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-bs">
            
              <a name="method-c-bs"></a><b>bs</b>(p1, p2, p3, p4, p5, p6, p7)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-charm">
            
              <a name="method-c-charm"></a><b>charm(call_put_flag, S, K, T, r, q, v)
 </b>
            
          </div>
          
          
            <div class="description">
              <p>Returns the charm options Greek (sensitivity of delta to the passage of
time)</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-charm_source')" id="l_method-c-charm_source">show</a>
                
              </p>
              <div id="method-c-charm_source" class="dyn-source">
                <pre>static VALUE
rupee_charm(self, _call_put_flag, _S, _K, _T, _r, _q, _v)
  VALUE self, _call_put_flag, _S, _K, _T, _r, _q, _v;
{
  const char *call_put_flag;
  double d1, d2, S, K, T, r, q, v;

  call_put_flag = StringValuePtr(_call_put_flag);
  S = NUM2DBL(_S);
  K = NUM2DBL(_K);
  T = NUM2DBL(_T);
  r = NUM2DBL(_r);
  q = NUM2DBL(_q);
  v = NUM2DBL(_v);

  d1 = (log(S / K) + (r - q + v * v / 2) * T) / (v * sqrt(T));
  d2 = d1 - v * sqrt(T);

  if (is_call(call_put_flag))
    return rb_float_new(-q * exp(-q * T) * cnd(d1) + exp(-q * T) * pdf(d1) *
      (2 * (r - q) * T - d2 * v * sqrt(T)) / (2 * T * v * sqrt(T)));
  else
    return rb_float_new(q * exp(-q * T) * cnd(-d1) + exp(-q * T) * pdf(d1) *
      (2 * (r - q) * T - d2 * v * sqrt(T)) / (2 * T * v * sqrt(T)));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-color">
            
              <a name="method-c-color"></a><b>color(call_put_flag, S, K, T, r, q, v)
 </b>
            
          </div>
          
          
            <div class="description">
              <p>Returns the color options Greek (sensitivity of gamma to the passage of
time)</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-color_source')" id="l_method-c-color_source">show</a>
                
              </p>
              <div id="method-c-color_source" class="dyn-source">
                <pre>static VALUE
rupee_color(self, _call_put_flag, _S, _K, _T, _r, _q, _v)
  VALUE self, _call_put_flag, _S, _K, _T, _r, _q, _v;
{
  const char *call_put_flag;
  double d1, d2, S, K, T, r, q, v;

  call_put_flag = StringValuePtr(_call_put_flag);
  S = NUM2DBL(_S);
  K = NUM2DBL(_K);
  T = NUM2DBL(_T);
  r = NUM2DBL(_r);
  q = NUM2DBL(_q);
  v = NUM2DBL(_v);
  d1 = (log(S / K) + (r - q + v * v / 2) * T) / (v * sqrt(T));
  d2 = d1 - v * sqrt(T);

  return rb_float_new(-exp(-q * T) * pdf(d1) / (2.0 * S * T * v * sqrt(T)) *
      (2.0 * q * T + 1.0 + (2.0 * (r - q) * T - d2 * v * sqrt(T)) /
      (2.0 * T * v * sqrt(T)) * d1));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-delta">
            
              <a name="method-c-delta"></a><b>delta(call_put_flag, underlying, strike, time, rate, div_yield,
volatility)
 </b>
            
          </div>
          
          
            <div class="description">
              <p>Returns the delta options Greek (sensitivity to changes in the underlying’s
price</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-delta_source')" id="l_method-c-delta_source">show</a>
                
              </p>
              <div id="method-c-delta_source" class="dyn-source">
                <pre>static VALUE
rupee_delta(self, _call_put_flag, _S, _K, _T, _r, _q, _v)
  VALUE self, _call_put_flag, _S, _K, _T, _r, _q, _v;
{
  const char *call_put_flag;
  double S, K, T, r, q, v;

  call_put_flag = StringValuePtr(_call_put_flag);
  S = NUM2DBL(_S);
  K = NUM2DBL(_K);
  T = NUM2DBL(_T);
  r = NUM2DBL(_r);
  q = NUM2DBL(_q);
  v = NUM2DBL(_v);

  return rb_float_new(delta(call_put_flag, S, K, T, r, q, v));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-dual_delta">
            
              <a name="method-c-dual_delta"></a><b>dual_delta(call_put_flag, S, K, T, r, q, v)
 </b>
            
          </div>
          
          
            <div class="description">
              <p>Returns the dual delta options Greek (probability of finishing
in-the-money)</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-dual_delta_source')" id="l_method-c-dual_delta_source">show</a>
                
              </p>
              <div id="method-c-dual_delta_source" class="dyn-source">
                <pre>static VALUE
rupee_dual_delta(self, _call_put_flag, _S, _K, _T, _r, _q, _v)
  VALUE self, _call_put_flag, _S, _K, _T, _r, _q, _v;
{
  const char *call_put_flag;
  double d1, d2, S, K, T, r, q, v;

  call_put_flag = StringValuePtr(_call_put_flag);
  S = NUM2DBL(_S);
  K = NUM2DBL(_K);
  T = NUM2DBL(_T);
  r = NUM2DBL(_r);
  q = NUM2DBL(_q);
  v = NUM2DBL(_v);
  d1 = (log(S / K) + (r - q + v * v / 2) * T) / (v * sqrt(T));
  d2 = d1 - v * sqrt(T);

  if (is_call(call_put_flag))
    return rb_float_new(-exp(-q * T) * cnd(d2));
  else
    return rb_float_new(exp(-q * T) * cnd(-d2));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-dual_gamma">
            
              <a name="method-c-dual_gamma"></a><b>dual_gamma(call_put_flag, S, K, T, r, q, v)
 </b>
            
          </div>
          
          
            <div class="description">
              <p>Returns the dual gamma options Greek.</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-dual_gamma_source')" id="l_method-c-dual_gamma_source">show</a>
                
              </p>
              <div id="method-c-dual_gamma_source" class="dyn-source">
                <pre>static VALUE
rupee_dual_gamma(self, _call_put_flag, _S, _K, _T, _r, _q, _v)
  VALUE self, _call_put_flag, _S, _K, _T, _r, _q, _v;
{
  const char *call_put_flag;
  double d1, d2, S, K, T, r, q, v;

  call_put_flag = StringValuePtr(_call_put_flag);
  S = NUM2DBL(_S);
  K = NUM2DBL(_K);
  T = NUM2DBL(_T);
  r = NUM2DBL(_r);
  q = NUM2DBL(_q);
  v = NUM2DBL(_v);
  d1 = (log(S / K) + (r - q + v * v / 2) * T) / (v * sqrt(T));
  d2 = d1 - v * sqrt(T);

  return rb_float_new(exp(-r * T) * pdf(d2) / (K * v * sqrt(T)));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-dvega_dtime">
            
              <a name="method-c-dvega_dtime"></a><b>dvega_dtime(call_put_flag, S, K, T, r, q, v)
 </b>
            
          </div>
          
          
            <div class="description">
              <p>Returns the dvega dtime options Greek (sensitivity of vega to the passage
of time)</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-dvega_dtime_source')" id="l_method-c-dvega_dtime_source">show</a>
                
              </p>
              <div id="method-c-dvega_dtime_source" class="dyn-source">
                <pre>static VALUE
rupee_dvega_dtime(self, _call_put_flag, _S, _K, _T, _r, _q, _v)
  VALUE self, _call_put_flag, _S, _K, _T, _r, _q, _v;
{
  const char *call_put_flag;
  double d1, d2, S, K, T, r, q, v;

  call_put_flag = StringValuePtr(_call_put_flag);
  S = NUM2DBL(_S);
  K = NUM2DBL(_K);
  T = NUM2DBL(_T);
  r = NUM2DBL(_r);
  q = NUM2DBL(_q);
  v = NUM2DBL(_v);
  d1 = (log(S / K) + (r - q + v * v / 2) * T) / (v * sqrt(T));
  d2 = d1 - v * sqrt(T);

  return rb_float_new(S * exp(-q * T) * pdf(d1) * sqrt(T) *
      (q + ((r - q) * d1) / (v * sqrt(T)) - (1 + d1 * d2) / (2 * T)));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-gamma">
            
              <a name="method-c-gamma"></a><b>gamma(call_put_flag, underlying, strike, time, rate, div_yield,
volatility)
 </b>
            
          </div>
          
          
            <div class="description">
              <p>Returns the gamma options Greek (sensitivity to changes in delta;
convexity)</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-gamma_source')" id="l_method-c-gamma_source">show</a>
                
              </p>
              <div id="method-c-gamma_source" class="dyn-source">
                <pre>static VALUE
rupee_gamma(self, _call_put_flag, _S, _K, _T, _r, _q, _v)
  VALUE self, _call_put_flag, _S, _K, _T, _r, _q, _v;
{
  const char *call_put_flag;
  double S, K, T, r, q, v;

  call_put_flag = StringValuePtr(_call_put_flag);
  S = NUM2DBL(_S);
  K = NUM2DBL(_K);
  T = NUM2DBL(_T);
  r = NUM2DBL(_r);
  q = NUM2DBL(_q);
  v = NUM2DBL(_v);

  return rb_float_new(bs_gamma(call_put_flag, S, K, T, r, q, v));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-gbs">
            
              <a name="method-c-gbs"></a><b>gbs</b>(p1, p2, p3, p4, p5, p6, p7)
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-generalized_black_scholes">
            
              <a name="method-c-generalized_black_scholes"></a><b>generalized_black_scholes(call_put_flag, forward, strike_price,
time_to_expiry, risk_free_rate, volatility)
 </b>
            
          </div>
          
          
            <div class="description">
              <p>The generalized Black-Scholes European call/put valuation</p>

<h4>Arguments</h4>
<ul><li>
<p><tt>call_put_flag</tt> - Whether the instrument is a call (c) or a put (p)</p>
</li><li>
<p><tt>forward</tt> - The current forward value</p>
</li><li>
<p><tt>strike_price</tt> - The option's strike price</p>
</li><li>
<p><tt>time_to_expiry</tt> - The time to maturity in years</p>
</li><li>
<p><tt>risk_free_rate</tt> - The risk-free rate through expiry</p>
</li><li>
<p><tt>cost_of_carry</tt> - The annualized cost of carry</p>
</li><li>
<p><tt>volatility</tt> - The implied volatility at expiry</p>
</li></ul>
            </div>
          
          
          
            <div class="aka">
              Also aliased as: <a href="Option.html#method-c-gbs">gbs</a>
            </div>
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-generalized_black_scholes_source')" id="l_method-c-generalized_black_scholes_source">show</a>
                
              </p>
              <div id="method-c-generalized_black_scholes_source" class="dyn-source">
                <pre>static VALUE
rupee_generalized_black_scholes(self, _call_put_flag, _S, _K, _T, _r, _b, _v)
  VALUE self, _call_put_flag, _S, _K, _T, _r, _b, _v;
{
  const char *call_put_flag;
  double S, K, T, r, b, v;

  call_put_flag = StringValuePtr(_call_put_flag);
  S = NUM2DBL(_S);
  K = NUM2DBL(_K);
  T = NUM2DBL(_T);
  r = NUM2DBL(_r);
  b = NUM2DBL(_b);
  v = NUM2DBL(_v);

  return rb_float_new(gbs(call_put_flag, S, K, T, r, b, v));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-implied_volatility">
            
              <a name="method-c-implied_volatility"></a><b>implied_volatility(call_put_flag, underlying, strike, time, rate,
div_yield, price)
 </b>
            
          </div>
          
          
            <div class="description">
              <p>Returns the Black-Scholes implied volatility using the Newton-Raphson
method</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-implied_volatility_source')" id="l_method-c-implied_volatility_source">show</a>
                
              </p>
              <div id="method-c-implied_volatility_source" class="dyn-source">
                <pre>static VALUE
rupee_impl_vol(self, _call_put_flag, _S, _K, _T, _r, _q, _cm)
  VALUE self, _call_put_flag, _S, _K, _T, _r, _q, _cm;
{
  static const double epsilon = 0.00000001;
  double vi, ci, vegai, min_diff, S, K, T, r, q, cm;
  const char *call_put_flag;

  call_put_flag = StringValuePtr(_call_put_flag);
  S = NUM2DBL(_S);
  K = NUM2DBL(_K);
  T = NUM2DBL(_T);
  r = NUM2DBL(_r);
  q = NUM2DBL(_q);
  cm = NUM2DBL(_cm);

  // Manaster and Koehler seed value
  vi = sqrt(abs(log(S / K) + r * T) * 2 / T);
  ci = bs(call_put_flag, S, K, T, r, q, vi);
  vegai = vega(call_put_flag, S, K, T, r, q, vi);
  min_diff = abs(cm - ci);

  while (min_diff &gt;= epsilon) {
    vi -= (ci - cm) / vegai;
    ci = bs(call_put_flag, S, K, T, r, q, vi);
    vegai = vega(call_put_flag, S, K, T, r, q, vi);
    min_diff = abs(cm - ci);
  }

  if (min_diff &lt; epsilon)
    return vi;
  else
    return 0;
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-rho">
            
              <a name="method-c-rho"></a><b>rho(call_put_flag, underlying, strike, time, rate, div_yield,
volatility)
 </b>
            
          </div>
          
          
            <div class="description">
              <p>Returns the rho options Greek (sensitivity to the risk-free rate)</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-rho_source')" id="l_method-c-rho_source">show</a>
                
              </p>
              <div id="method-c-rho_source" class="dyn-source">
                <pre>static VALUE
rupee_rho(self, _call_put_flag, _S, _K, _T, _r, _q, _v)
  VALUE self, _call_put_flag, _S, _K, _T, _r, _q, _v;
{
  const char *call_put_flag;
  double S, K, T, r, q, v;

  call_put_flag = StringValuePtr(_call_put_flag);
  S = NUM2DBL(_S);
  K = NUM2DBL(_K);
  T = NUM2DBL(_T);
  r = NUM2DBL(_r);
  q = NUM2DBL(_q);
  v = NUM2DBL(_v);

  return rb_float_new(rho(call_put_flag, S, K, T, r, q, v));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-speed">
            
              <a name="method-c-speed"></a><b>rupee_speed(call_put_flag, S, K, T, r, q, v)
 </b>
            
          </div>
          
          
            <div class="description">
              <p>Returns the speed options Greek (sensitivity of gamma to changes in the
underlying’s price).</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-speed_source')" id="l_method-c-speed_source">show</a>
                
              </p>
              <div id="method-c-speed_source" class="dyn-source">
                <pre>static VALUE
rupee_speed(self, _call_put_flag, _S, _K, _T, _r, _q, _v)
  VALUE self, _call_put_flag, _S, _K, _T, _r, _q, _v;
{
  const char *call_put_flag;
  double d1, S, K, T, r, q, v;

  call_put_flag = StringValuePtr(_call_put_flag);
  S = NUM2DBL(_S);
  K = NUM2DBL(_K);
  T = NUM2DBL(_T);
  r = NUM2DBL(_r);
  q = NUM2DBL(_q);
  v = NUM2DBL(_v);
  d1 = (log(S / K) + (r - q + v * v / 2) * T) / (v * sqrt(T));

  return rb_float_new(-exp(-q * T) * pdf(d1) / (S * S * v * sqrt(T)) *
      (d1 / (v * sqrt(T)) + 1));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-theta">
            
              <a name="method-c-theta"></a><b>theta(call_put_flag, underlying, strike, time, rate, div_yield,
volatility)
 </b>
            
          </div>
          
          
            <div class="description">
              <p>returns the theta options greek (sensitivity to the passage of time; time
decay)</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-theta_source')" id="l_method-c-theta_source">show</a>
                
              </p>
              <div id="method-c-theta_source" class="dyn-source">
                <pre>static VALUE
rupee_theta(self, _call_put_flag, _S, _K, _T, _r, _q, _v)
  VALUE self, _call_put_flag, _S, _K, _T, _r, _q, _v;
{
  const char *call_put_flag;
  double S, K, T, r, q, v;

  call_put_flag = StringValuePtr(_call_put_flag);
  S = NUM2DBL(_S);
  K = NUM2DBL(_K);
  T = NUM2DBL(_T);
  r = NUM2DBL(_r);
  q = NUM2DBL(_q);
  v = NUM2DBL(_v);

  return rb_float_new(theta(call_put_flag, S, K, T, r, q, v));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-vanna">
            
              <a name="method-c-vanna"></a><b>vanna(call_put_flag, S, K, T, r, q, v)
 </b>
            
          </div>
          
          
            <div class="description">
              <p>Returns the vanna options Greek (sensitivity of delta to changes in
volatility)</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-vanna_source')" id="l_method-c-vanna_source">show</a>
                
              </p>
              <div id="method-c-vanna_source" class="dyn-source">
                <pre>static VALUE
rupee_vanna(self, _call_put_flag, _S, _K, _T, _r, _q, _v)
  VALUE self, _call_put_flag, _S, _K, _T, _r, _q, _v;
{
  const char *call_put_flag;
  double d1, d2, S, K, T, r, q, v;
  
  call_put_flag = StringValuePtr(_call_put_flag);
  S = NUM2DBL(_S);
  K = NUM2DBL(_K);
  T = NUM2DBL(_T);
  r = NUM2DBL(_r);
  q = NUM2DBL(_q);
  v = NUM2DBL(_v);
  d1 = (log(S / K) + (r - q + v * v / 2) * T) / (v * sqrt(T));
  d2 = d1 - v * sqrt(T);

  return rb_float_new(-exp(-q * T) * pdf(d1) * d2 / v);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-vega">
            
              <a name="method-c-vega"></a><b>vega(call_put_flag, underlying, strike, time, rate, div_yield,
volatility)
 </b>
            
          </div>
          
          
            <div class="description">
              <p>Returns the vega options Greek (sensitivity to changes in volatility)</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-vega_source')" id="l_method-c-vega_source">show</a>
                
              </p>
              <div id="method-c-vega_source" class="dyn-source">
                <pre>static VALUE
rupee_vega(self, _call_put_flag, _S, _K, _T, _r, _q, _v)
  VALUE self, _call_put_flag, _S, _K, _T, _r, _q, _v;
{
  const char *call_put_flag;
  double S, K, T, r, q, v;

  call_put_flag = StringValuePtr(_call_put_flag);
  S = NUM2DBL(_S);
  K = NUM2DBL(_K);
  T = NUM2DBL(_T);
  r = NUM2DBL(_r);
  q = NUM2DBL(_q);
  v = NUM2DBL(_v);

  return rb_float_new(vega(call_put_flag, S, K, T, r, q, v));
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-vomma">
            
              <a name="method-c-vomma"></a><b>vomma(call_put_flag, S, K, T, r, q, v)
 </b>
            
          </div>
          
          
            <div class="description">
              <p>Returns the vomma options Greek (sensitivity of vega to changes in
volatility)</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-vomma_source')" id="l_method-c-vomma_source">show</a>
                
              </p>
              <div id="method-c-vomma_source" class="dyn-source">
                <pre>static VALUE
rupee_vomma(self, _call_put_flag, _S, _K, _T, _r, _q, _v)
  VALUE self, _call_put_flag, _S, _K, _T, _r, _q, _v;
{
  const char *call_put_flag;
  double d1, d2, S, K, T, r, q, v;

  call_put_flag = StringValuePtr(_call_put_flag);
  S = NUM2DBL(_S);
  K = NUM2DBL(_K);
  T = NUM2DBL(_T);
  r = NUM2DBL(_r);
  q = NUM2DBL(_q);
  v = NUM2DBL(_v);
  d1 = (log(S / K) + (r - q + v * v / 2) * T) / (v * sqrt(T));
  d2 = d1 - v * sqrt(T);

  return rb_float_new(S * exp(-q * T) * pdf(d1) * sqrt(T) * d1 * d2 / v);
}</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-zomma">
            
              <a name="method-c-zomma"></a><b>zomma(call_put_flag, S, K, T, r, q, v)
 </b>
            
          </div>
          
          
            <div class="description">
              <p>Returns the zomma options Greek (sensitivity of gamma to changes in
volatility)</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-zomma_source')" id="l_method-c-zomma_source">show</a>
                
              </p>
              <div id="method-c-zomma_source" class="dyn-source">
                <pre>static VALUE
rupee_zomma(self, _call_put_flag, _S, _K, _T, _r, _q, _v)
  VALUE self, _call_put_flag, _S, _K, _T, _r, _q, _v;
{
  const char *call_put_flag;
  double d1, d2, S, K, T, r, q, v;
  
  call_put_flag = StringValuePtr(_call_put_flag);
  S = NUM2DBL(_S);
  K = NUM2DBL(_K);
  T = NUM2DBL(_T);
  r = NUM2DBL(_r);
  q = NUM2DBL(_q);
  v = NUM2DBL(_v);
  d1 = (log(S / K) + (r - q + v * v / 2) * T) / (v * sqrt(T));
  d2 = d1 - v * sqrt(T);

  return rb_float_new(-exp(-q * T) * pdf(d1) * (d1 * d2 - 1) /
      (S * v * v * sqrt(T)));
}</pre>
              </div>
            </div>
            
          </div>
                  
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-black_scholes">
            
              <a name="method-i-black_scholes"></a><b>black_scholes</b>()
            
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-black_scholes_source')" id="l_method-i-black_scholes_source">show</a>
                
                  | <a href="https://github.com/brymck/rupee/blob/ec2de27bf5a0228a84125991697aa12d8c56849d/lib/rupee/option.rb#L26" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-black_scholes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/rupee/option.rb, line 26</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">black_scholes</span>
  <span class="ruby-ivar">@value</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">black_scholes</span> <span class="ruby-ivar">@type</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-ivar">@underlying</span>, <span class="ruby-ivar">@strike</span>,
    <span class="ruby-ivar">@time</span>, <span class="ruby-ivar">@rate</span>, <span class="ruby-ivar">@div_yield</span>, <span class="ruby-ivar">@volatility</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>
    </div>
  </body>
</html>    